Refactor: main.py

This commit:
 - Completely refactors main.py for increased readability
 - Seaprates flow logic for handling all modes into the "modes" class
 - Creates a new utils file to handle any object creation for relevant classes